// ===== MULTILINGUAL TRANSLATIONS =====
const translations = {
  en: {
    // Navigation
    nav: {
      home: "Home",
      about: "About me",
      work: "Work",
      contact: "Contact",
    },

    // Loading
    loading: "Loading",

    // Welcome Page
    welcome: {
      text: "Welcome to my portfolio",
    },

    // Home Page
    home: {
      greeting: "Hello, I'm",
      name: "Fironi<br />Habibzade",
      downloadCV: "Download CV",
    },

    // About Page
    about: {
      title: "About Me",
      greeting: "Hello, I'm",
      name: "Fironi<br />Habibzade",
      description:
        "Hello! I am a Full Stack Programmer with a strong passion for Startup business and building digital solutions. I work in multiple technology stacks including C, Python, .Net, React, Flutter, etc. - delivering applications with clean and scalable architectures. In addition to my personal development, I am the founder of a startup project called MyHomeTeck - a rental tracking and management system that is currently in development and will be launched in the Turkish market to modernize property management. In this technological journey, I am constantly developing myself as a leader, entrepreneur and programmer. At the same time, I strive to turn real problems into creative and technology-based solutions. I approach each project with a focus on innovation, simplicity and real impact. In short, for me, coding is just a tool - the most important thing is to implement my ideas!",
      skills: "Technical Skills",
    },

    // Work Page
    work: {
      title: "Work",
      subtitle: "Here are some of my recent projects",
      viewWork: "View Work",
      learnMore: "Learn More",
      completedProject: "Completed Project",
      projectOnHold: "Project On Hold",
      projectClosedByCompany: "Project closed by company",
      tapToMore: "Tap to more",
    },

    // Contact Page
    contact: {
      title: "Contact",
      subtitle: "Let's connect and bring your ideas to life together.",
      getInTouch: "Get In Touch",
      form: {
        description:
          "If you'd like to work together or learn more about what I do, feel free to reach out. I'm happy to connect and discuss further.",
        email: "Email",
        emailPlaceholder: "Please enter your email",
        mobile: "Mobile",
        mobilePlaceholder: "+90 555 555 55 55",
        message: "Message",
        messagePlaceholder: "Enter your message",
        submit: "Submit",
        back: "Back",
      },
      thankYou: {
        title: "Thank You!",
        backToContact: "Back",
      },
    },
  },

  az: {
    // Navigation
    nav: {
      home: "Ana Səhifə",
      about: "Haqqımda",
      work: "İşlərim",
      contact: "Əlaqə",
    },

    // Loading
    loading: "Yüklənir",

    // Welcome Page
    welcome: {
      text: "Portfolioma xoş gəlmisiniz",
    },

    // Home Page
    home: {
      greeting: "Salam, mən",
      name: "Fironi<br />Həbibzadəyəm",
      downloadCV: "CV Yüklə",
    },

    // About Page
    about: {
      title: "Haqqımda",
      greeting: "Salam, mən",
      name: "Fironi<br />Həbibzadəyəm",
      description:
        "Salamlar! Mən Startup biznesinə və rəqəmsal həllərin qurulmasına güclü həvəsi olan bir Full Stack Proqramçıyam. C, Python, .Net, React, Flutter və.s daxil olmaqla bir çox texnoloji yığında işləyirəm - təmiz və miqyaslana bilən arxitektura ilə tətbiqlər təqdim edirəm. Səxsi inkişafımdan əlavə, mülk idarəçiliyini modernləşdirmək üçün Türkiyə bazarında satışa çıxacaq və hazırlanma mərhələsində olan icarə izləmə və idarə etmə sistemi - MyHomeTeck adlanan startup layihəsinin təsisçisiyəm. Bu texnoloji səyahətimdə mən, həm liderlik, sahibkarlıq və proqramçı kimi daim özümü inkişaf etdirirəm. Eyni zamanda real problemləri yaradıcı və texnologiyaya əsaslanan həllərə çevirməyə çalışıram. Hər bir layihənin innovasiya, sadəlik və real təsirinə diqqət yetirməklə yanaşıram. Qısacası, mənim üçün kod yazmaq sadəcə bir vasitədir - ən əsası ideyalarımı həyata keçirməkdir!",
      skills: "Texniki Bacarıqlar",
    },

    // Work Page
    work: {
      title: "İşlərim",
      subtitle: "Son layihələrimdən bəziləri",
      viewWork: "İşə Bax",
      learnMore: "Ətraflı Öyrən",
      completedProject: "Tamamlanmış Layihə",
      projectOnHold: "Layihə Gözləmədədir",
      projectClosedByCompany: "Layihə şirkət tərəfindən bağlanıb",
      tapToMore: "Daha çoxu üçün",
    },

    // Contact Page
    contact: {
      title: "Əlaqə",
      subtitle:
        "Gəlin əlaqə saxlayaq və ideyalarınızı birlikdə həyata keçirək.",
      getInTouch: "Əlaqə Saxla",
      form: {
        description:
          "Əgər birlikdə işləmək və ya etdiyim işlər haqqında daha çox öyrənmək istəyirsinizsə, mənimlə əlaqə saxlamaqdan çəkinməyin. Əlaqə saxlamaq və daha ətraflı müzakirələr etmək mənim üçün xoş olar!",
        email: "E-poçt",
        emailPlaceholder: "Zəhmət olmasa e-poçtunuzu daxil edin",
        mobile: "Mobil",
        mobilePlaceholder: "+90 555 555 55 55",
        message: "Mesaj",
        messagePlaceholder: "Mesajınızı daxil edin",
        submit: "Göndər",
        back: "Geri",
      },
      thankYou: {
        title: "Təşəkkürlər!",
        backToContact: "Geri qayıt",
      },
    },
  },

  tr: {
    // Navigation
    nav: {
      home: "Ana Sayfa",
      about: "Hakkımda",
      work: "Çalışmalarım",
      contact: "İletişim",
    },

    // Loading
    loading: "Yükleniyor",

    // Welcome Page
    welcome: {
      text: "Portfolyoma hoş geldiniz",
    },

    // Home Page
    home: {
      greeting: "Merhaba, ben",
      name: "Fironi<br />Habibzade",
      downloadCV: "CV İndir",
    },

    // About Page
    about: {
      title: "Hakkımda",
      greeting: "Merhaba, ben",
      name: "Fironi<br />Habibzade",
      description:
        "Selamlar! Ben, Startup girişimine ve dijital çözümler oluşturmaya karşı güçlü bir tutkuya sahip Full Stack Programcıyım. C, Python, .Net, React, Flutter vb. birden fazla teknoloji yığınında çalışarak temiz ve ölçeklenebilir mimarilere sahip uygulamalar geliştiriyorum. Kişisel gelişimimin yanı sıra, Türkiye pazarına sunulacak, emlak yönetimini modernize edecek kira takip ve yönetim sistemi olan MyHomeTeck adlı bir startup projesinin kurucusuyum. Bu teknoloji yolculuğumda kendimi bir lider, girişimci ve programcı olarak sürekli geliştiriyorum. Aynı zamanda gerçek sorunları yaratıcı ve teknoloji tabanlı çözümlere dönüştürmeye çalışıyorum. Her projeye yenilikçilik, sadelik ve gerçek etki odaklı yaklaşıyorum. Kısacası, kodlama benim için sadece bir araçtır; önemli olan fikirlerimi hayata geçirebilmektir!",
      skills: "Teknik Beceriler",
    },

    // Work Page
    work: {
      title: "Çalışmalarım",
      subtitle: "İşte son projelerim",
      viewWork: "Çalışmayı Görüntüle",
      learnMore: "Daha Fazla Öğren",
      completedProject: "Tamamlanmış Proje",
      projectOnHold: "Proje Beklemede",
      projectClosedByCompany: "Proje şirket tarafından kapatıldı",
      tapToMore: "Daha Fazla",
    },

    // Contact Page
    contact: {
      title: "İletişim",
      subtitle:
        "Hadi iletişime geçelim ve fikirlerinizi birlikte hayata geçirelim.",
      getInTouch: "İletişime Geç",
      form: {
        description:
          "Birlikte çalışmak veya yaptığım işler hakkında daha fazla bilgi edinmek isterseniz, benimle iletişime geçmekten çekinmeyin. Bağlantı kurmak ve daha fazla tartışmak beni mutlu eder.",
        email: "E-posta",
        emailPlaceholder: "Lütfen e-postanızı girin",
        mobile: "Mobil",
        mobilePlaceholder: "+90 555 555 55 55",
        message: "Mesaj",
        messagePlaceholder: "Mesajınızı girin",
        submit: "Gönder",
        back: "Geri",
      },
      thankYou: {
        title: "Teşekkürler!",
        backToContact: "Geri",
      },
    },
  },

  ru: {
    // Navigation
    nav: {
      home: "Главная",
      about: "Обо мне",
      work: "Работы",
      contact: "Контакты",
    },

    // Loading
    loading: "Загрузка",

    // Welcome Page
    welcome: {
      text: "Добро пожаловать в мое портфолио",
    },

    // Home Page
    home: {
      greeting: "Привет, я",
      name: "Фирони<br />Хабибзаде",
      downloadCV: "Скачать CV",
    },

    // About Page
    about: {
      title: "Обо мне",
      greeting: "Привет, я",
      name: "Фирони<br />Хабибзаде",
      description:
        "Привет! Я Full Stack программист, страстно увлеченный стартапами и созданием цифровых решений. Я работаю с несколькими стеками технологий, включая C, Python, .Net, React, Flutter и т. д., создавая приложения с чистой и масштабируемой архитектурой. Помимо личного развития, я являюсь основателем стартап-проекта MyHomeTeck — системы отслеживания и управления арендой, которая будет запущена на турецком рынке и находится на стадии разработки с целью модернизации управления недвижимостью. На этом технологическом пути я постоянно развиваюсь как лидер, предприниматель и программист. В то же время я стремлюсь преобразовывать реальные проблемы в креативные и технологичные решения. Я подхожу к каждому проекту, уделяя особое внимание инновациям, простоте и реальному эффекту. Короче говоря, для меня кодирование — это всего лишь инструмент. Самое главное — реализовать мои идеи!",
      skills: "Технические навыки",
    },

    // Work Page
    work: {
      title: "Мои работы",
      subtitle: "Вот некоторые из моих последних проектов",
      viewWork: "Посмотреть работу",
      learnMore: "Узнать больше",
      completedProject: "Завершенный проект",
      projectOnHold: "Проект приостановлен",
      projectClosedByCompany: "Проект закрыт компанией",
      tapToMore: "Чтобы увидеть больше",
    },

    // Contact Page
    contact: {
      title: "Контакты",
      subtitle: "Давайте свяжемся и воплотим ваши идеи в жизнь вместе.",
      getInTouch: "Связаться",
      form: {
        description:
          "Если вы хотите работать вместе или узнать больше о том, что я делаю, не стесняйтесь обращаться. Я буду рад связаться и обсудить дальше.",
        email: "Электронная почта",
        emailPlaceholder: "Пожалуйста, введите вашу электронную почту",
        mobile: "Мобильный",
        mobilePlaceholder: "+90 555 555 55 55",
        message: "Сообщение",
        messagePlaceholder: "Введите ваше сообщение",
        submit: "Отправить",
        back: "Назад",
      },
      thankYou: {
        title: "Спасибо!",
        backToContact: "Назад",
      },
    },
  },
};

// ===== TRANSLATION FUNCTIONS =====
let currentLanguage = "en";

// Make currentLanguage globally accessible
if (typeof window !== "undefined") {
  window.currentLanguage = currentLanguage;
}

function setLanguage(lang) {
  currentLanguage = lang;
  if (typeof window !== "undefined") {
    window.currentLanguage = lang;
  }
  console.log(`🔄 setLanguage called with: ${lang}`);
  updatePageContent();
  localStorage.setItem("selectedLanguage", lang);
}

function getCurrentLanguage() {
  return localStorage.getItem("selectedLanguage") || "en";
}

function translate(key) {
  // Use global currentLanguage if available, otherwise use local
  const lang =
    (typeof window !== "undefined" && window.currentLanguage) ||
    currentLanguage ||
    getCurrentLanguage();

  const keys = key.split(".");
  let value = translations[lang];

  for (const k of keys) {
    if (value && value[k]) {
      value = value[k];
    } else {
      // Fallback to English if translation not found
      value = translations.en;
      for (const k of keys) {
        if (value && value[k]) {
          value = value[k];
        } else {
          return key; // Return key if not found
        }
      }
      break;
    }
  }

  return value || key;
}

function updatePageContent() {
  // Update navigation links
  updateNavigation();

  // Update content based on current page
  updateWelcomePage();
  updateHomePage();
  updateAboutPage();
  updateWorkPage();
  updateContactPage();
  updateLoadingText();
}

function updateNavigation() {
  const navLinks = document.querySelectorAll(".nav-link");
  navLinks.forEach((link) => {
    const text = link.textContent.trim();
    if (
      text === "Home" ||
      text === "Ana Səhifə" ||
      text === "Ana Sayfa" ||
      text === "Главная"
    ) {
      link.textContent = translate("nav.home");
    } else if (
      text === "About me" ||
      text === "Haqqımda" ||
      text === "Hakkımda" ||
      text === "Обо мне"
    ) {
      link.textContent = translate("nav.about");
    } else if (
      text === "Work" ||
      text === "İşlərim" ||
      text === "Çalışmalarım" ||
      text === "Работы"
    ) {
      link.textContent = translate("nav.work");
    } else if (
      text === "Contact" ||
      text === "Əlaqə" ||
      text === "İletişim" ||
      text === "Контакты"
    ) {
      link.textContent = translate("nav.contact");
    }
  });
}

function updateWelcomePage() {
  // Welcome page always stays in English - no translation needed
}

function updateHomePage() {
  const greeting = document.querySelector(".home-page .greeting");
  const downloadBtn = document.querySelector(".download-cv-btn");

  if (greeting) {
    greeting.textContent = translate("home.greeting");
  }

  if (downloadBtn) {
    const icon = downloadBtn.querySelector("i");
    downloadBtn.innerHTML = "";
    if (icon) downloadBtn.appendChild(icon);
    downloadBtn.appendChild(
      document.createTextNode(" " + translate("home.downloadCV"))
    );
  }
}

function updateAboutPage() {
  const aboutTitle = document.querySelector(".about-page .about-title");
  const aboutGreeting = document.querySelector(".about-page .greeting");
  const aboutDescription = document.querySelector(".about-description");
  const skillsTitle = document.querySelector(".skills-title");

  if (aboutTitle) {
    aboutTitle.textContent = translate("about.title");
  }

  if (aboutGreeting) {
    aboutGreeting.textContent = translate("about.greeting");
  }

  if (aboutDescription) {
    // Update the paragraph content with translated text and styling
    const translatedText = translate("about.description");

    // Split text into sentences
    const sentences = translatedText.split(/(?<=[.!?])\s+/);
    const firstSentence = sentences[0] || "";
    const otherSentences = sentences.slice(1).join(" ");

    // Create HTML with styled spans
    aboutDescription.innerHTML = `
      <p>
        <span class="first-sentence">${firstSentence}</span>
        ${
          otherSentences
            ? `<span class="other-sentences"> ${otherSentences}</span>`
            : ""
        }
      </p>
    `;
  }

  if (skillsTitle) {
    skillsTitle.textContent = translate("about.skills");
  }
}

function updateWorkPage() {
  const workTitle = document.querySelector(".work-page .work-title");
  const workSubtitle = document.querySelector(".work-page .work-subtitle");
  const viewWorkBtns = document.querySelectorAll(".view-work-btn");
  const learnMoreBtns = document.querySelectorAll(".learn-more-btn");
  const completedProjectTexts = document.querySelectorAll(
    ".work-page .project-header span:first-child"
  );
  const tapToMoreTexts = document.querySelectorAll(
    ".work-page .tap-overlay span"
  );

  if (workTitle) {
    workTitle.textContent = translate("work.title");
  }

  if (workSubtitle) {
    workSubtitle.textContent = translate("work.subtitle");
  }

  viewWorkBtns.forEach((btn) => {
    btn.textContent = translate("work.viewWork");
  });

  learnMoreBtns.forEach((btn) => {
    btn.textContent = translate("work.learnMore");
  });

  // Update "Completed Project" texts
  completedProjectTexts.forEach((span) => {
    const text = span.textContent.trim();
    if (
      text === "Completed Project" ||
      text === "Tamamlanmış Proje" ||
      text === "Tamamlanmış Layihə" ||
      text === "Завершенный проект"
    ) {
      span.textContent = translate("work.completedProject");
    }
    // Update "Project On Hold" texts
    else if (
      text === "Project On Hold" ||
      text === "Proje Beklemede" ||
      text === "Layihə Gözləmədədir" ||
      text === "Проект приостановлен"
    ) {
      span.textContent = translate("work.projectOnHold");
    }
    // Update "Project closed by company" texts
    else if (
      text === "Project closed by company" ||
      text === "Proje şirket tarafından kapatıldı" ||
      text === "Layihə şirkət tərəfindən bağlanıb" ||
      text === "Проект закрыт компанией"
    ) {
      span.textContent = translate("work.projectClosedByCompany");
    }
  });

  // Update "Tap to more" texts
  tapToMoreTexts.forEach((span) => {
    const text = span.textContent.trim();
    if (
      text === "Tap to more" ||
      text === "Daha Fazla" ||
      text === "Daha çoxu üçün" ||
      text === "Чтобы увидеть больше"
    ) {
      span.textContent = translate("work.tapToMore");
    }
  });
}

function updateLoadingText() {
  const loadingText = document.querySelector(".slide-overlay .loading-text");
  if (loadingText) {
    loadingText.textContent = translate("loading");
  }
}

function updateContactPage() {
  // Update all contact titles
  const contactTitles = document.querySelectorAll(
    ".contact-page .contact-title"
  );
  contactTitles.forEach((title) => {
    if (title.closest(".contact-form-view")) {
      title.textContent = translate("contact.getInTouch");
    } else {
      title.textContent = translate("contact.title");
    }
  });

  // Update all contact subtitles
  const contactSubtitles = document.querySelectorAll(
    ".contact-page .contact-subtitle"
  );
  contactSubtitles.forEach((subtitle) => {
    if (subtitle.closest(".contact-form-view")) {
      subtitle.textContent = translate("contact.form.description");
    } else {
      subtitle.textContent = translate("contact.subtitle");
    }
  });

  // Update Get In Touch button
  const getInTouchBtn = document.querySelector(".get-in-touch-btn");
  if (getInTouchBtn) {
    const icon = getInTouchBtn.querySelector("i");
    getInTouchBtn.innerHTML = "";
    if (icon) getInTouchBtn.appendChild(icon);
    getInTouchBtn.appendChild(
      document.createTextNode(" " + translate("contact.getInTouch"))
    );
  }

  // Update form labels and placeholders
  updateContactForm();
  updateThankYouPage();
}

function updateContactForm() {
  const emailLabel = document.querySelector('label[for="email"]');
  const emailInput = document.querySelector("#email");
  const mobileLabel = document.querySelector('label[for="mobile"]');
  const mobileInput = document.querySelector("#mobile");
  const messageLabel = document.querySelector('label[for="message"]');
  const messageInput = document.querySelector("#message");
  const submitBtn = document.querySelector(".submit-btn");
  const backBtn = document.querySelector(".back-btn");

  if (emailLabel) emailLabel.textContent = translate("contact.form.email");
  if (emailInput)
    emailInput.placeholder = translate("contact.form.emailPlaceholder");
  if (mobileLabel) mobileLabel.textContent = translate("contact.form.mobile");
  if (mobileInput) mobileInput.placeholder = "";
  if (messageLabel)
    messageLabel.textContent = translate("contact.form.message");
  if (messageInput)
    messageInput.placeholder = translate("contact.form.messagePlaceholder");

  if (submitBtn) {
    const icon = submitBtn.querySelector("i");
    submitBtn.innerHTML = "";
    submitBtn.appendChild(
      document.createTextNode(translate("contact.form.submit") + " ")
    );
    if (icon) submitBtn.appendChild(icon);
  }

  if (backBtn) {
    const icon = backBtn.querySelector("i");
    backBtn.innerHTML = "";
    if (icon) backBtn.appendChild(icon);
    backBtn.appendChild(
      document.createTextNode(" " + translate("contact.form.back"))
    );
  }
}

function updateThankYouPage() {
  const thankYouTitle = document.querySelector(".thank-you-title");
  const backToContactBtn = document.querySelector(".back-to-contact-btn");

  if (thankYouTitle) {
    thankYouTitle.textContent = translate("contact.thankYou.title");
  }

  if (backToContactBtn) {
    const icon = backToContactBtn.querySelector("i");
    backToContactBtn.innerHTML = "";
    if (icon) backToContactBtn.appendChild(icon);
    backToContactBtn.appendChild(
      document.createTextNode(" " + translate("contact.thankYou.backToContact"))
    );
  }
}

// Initialize language on page load
document.addEventListener("DOMContentLoaded", function () {
  currentLanguage = getCurrentLanguage();
  // Small delay to ensure all elements are loaded
  setTimeout(() => {
    updatePageContent();
  }, 100);
});
